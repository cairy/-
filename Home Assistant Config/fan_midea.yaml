friendly_name: "美的风扇"
unique_id: fan_midea
value_template: "{{ states('input_boolean.midea_fan_state') }}"
percentage_template: "{{ states('input_number.midea_fan_speed') }}"
oscillating_template: "{{ states('input_select.midea_fan_oscillating') }}" #转动
# direction_template: "{{ states('input_select.midea_fan_direction') }}" #方向
speed_count: 3
turn_on:
  - service: remote.send_command
    target:
      entity_id: remote.zhi_neng_yao_kong_remote
    data:
      command: "b64:JgBoAAABJ5MTNxITEhMSExISExISExITEhMSNxI4EjgSNxI4EjcTNxI4EjcSExITEhMSExISExISExITEjcTNxI4EjcTNxI4EjcSOBITEhITEhITEhMSExITEhITNxI4EjcSOBI4EjcSAA0F" # IR Code
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.midea_fan_state
turn_off:
  - service: remote.send_command
    target:
      entity_id: remote.zhi_neng_yao_kong_remote
    data:
      command: "b64:JgBoAAABJ5MTNxITEhMSExISExISExITEhMSNxI4EjgSNxI4EjcTNxI4EjcSExITEhMSExISExISExITEjcTNxI4EjcTNxI4EjcSOBITEhITEhITEhMSExITEhITNxI4EjcSOBI4EjcSAA0F" # IR Code
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.midea_fan_state
set_percentage:
  - service: remote.send_command
    target:
      entity_id: remote.zhi_neng_yao_kong_remote
    data:
      command: >
        {% if is_state('input_boolean.midea_fan_state', 'on') %}
          b64: JgBoAAABKZIUNRUQFBEUERQRFBAVEBUQFBEUNRU1FDYUNRU1FDYUNRU1FDYUNRUQFBEUERQRFBAVEBUQFBEUNRU1FDYUNRU1FDYUNRU1FBEUERQQFRAUERQRFBEUEBU1FDYUNRU1FDUVAA0F
        {% else %}
          b64:JgBoAAABJ5MTNxITEhMSExISExISExITEhMSNxI4EjgSNxI4EjcTNxI4EjcSExITEhMSExISExISExITEjcTNxI4EjcTNxI4EjcSOBITEhITEhITEhMSExITEhITNxI4EjcSOBI4EjcSAA0F
        {% endif %}
  - service: input_number.set_value
    target:
        entity_id: input_number.midea_fan_speed
    data:
      value: "{{ percentage }}"
set_oscillating: #转动
  - service: remote.send_command
    target:
      entity_id: remote.zhi_neng_yao_kong_remote
    data:
      command: "b64:JgBoAAABKZEVNRQRFBEUERQQFRAVEBQRFBEUNRU1FDYUNRU1FDYUNRU1FDUVEBUQFDYUERQQFRAVEBQRFDUVNRUQFDYUNRU1FDYUNRUQFBEUNhQQFRAVEBQRFBEUNRU1FBEUNhQ1FTUUAA0F"
  - service: input_select.select_next
    target:
        entity_id: input_select.midea_fan_oscillating
    data:
      cycle: true

# set_direction: #方向
#   - service: remote.send_command
#     target:
#       entity_id: remote.zhi_neng_yao_kong_remote
#     data:
#       command: "b64:JgBoAAABKZIUNRUQFBEUERQRFBAVEBQRFBEUNRU1FDYUNRQ2FDUVNRQRFBEUEBUQFDYUERQ1FBEUNhM2FDYUNRUQFDYUERQ1FBEUERQRFBETNhQRFDUVEBQ2FDYUNRQ2ExIUNRQRFDYUAA0F"
#   - service: input_select.select_next
#     target:
#         entity_id: input_select.midea_fan_direction
#     data:
#       cycle: true